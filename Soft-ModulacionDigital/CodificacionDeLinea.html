<html lang="en" class="">

<head>

  <meta charset="UTF-8">
  <meta name="robots" content="noindex">

  <title>Codificacion En Linea</title>
  <script src="jquery/3.4.1/jquery.min.js"></script>
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" type="text/css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script language="JavaScript" src="bootstrap/js/bootstrap.min.js"></script>
  <script language="JavaScript" src="js/codigo.js"></script>


  <style class="INLINE_PEN_STYLESHEET_ID">
    canvas {
      display: block;
      margin: auto auto;
      background: #f0f0f0;
      border: 1px solid #fb0;
    }
  </style>


</head>

<body onload="drawPlanCartesiano();" style="color:#808080; background:#696969">
  <nav class="navbar navbar-expand-sm navbar-light bg-success">
    <a class="navbar-brand" href="#">Codificanción en Linea</a>
    <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId"
      aria-controls="collapsibleNavId" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavId">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
        <li class="nav-item active">
          <a class="nav-link" href="">
            <i class="fa fa-home"></i> Inicio<span class="sr-only"></span>
          </a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="#" onclick="lanzarModalAlumno();">
            <i class="fa fa-user"></i> Alumno <span class="sr-only">(current)</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container bg-light text-dark">

    <div class="row">
      <div class="col-sm-12 mt-1">
          <div class="form-row justify-content-center" >
            <label for="" class="col-sm-2">Cadena a Enviar: </label>
            <div class="col-sm-3">
              <input type="text" id="idCadena" value="01001110" class="form-control solo-numero-binario" placeholder="Ej.: 0011010">
            </div>
            <div class="col-sm-1">
              <i class="fa fa-pencil" aria-hidden="true" onclick="GenerarBinarioAutomaticamente();"
                title="Generar un binario aleatorio"></i>
            </div>
            <div class="col-sm-1">
              <button type="button" id="idButtonAvanzar" class="btn btn-primary btn-sm"
                onclick="AccionCodificar();">&gt;&gt;</button>
            </div>
          </div>
      </div>
    </div>

    <div class="row mt-2">
      <div class="col-sm-12">
        <div class="form-row justify-content-center" >
          <label for="" class="col-sm-2">Voltaje de Inicio: </label>
          <div class="col-sm-3">
            <select name="nVoltaje" class="custom-select" id="idVoltaje">
              <option value="1">Positivo</option>
              <option value="-1">Negativo</option>
            </select>
          </div>
          <div class="col-sm-1"></div><div class="col-sm-1"></div>
        </div>
      </div>
    </div>

    <div class="row mt-2" style="text-align: center;">
      <div class="col-sm-12">
          <button type="button" class="btn btn-outline-primary" onclick="ObtenerUniPolarNRZ();"> Unipolar NRZ</button>
          <button type="button" class="btn btn-outline-primary" onclick="ObtenerPolarNRZ_L();"> Polar NRZ-L</button>
          <button type="button" class="btn btn-outline-primary" onclick="ObtenerPolarNRZ_I();"> Polar NRZ-I</button>
          <button type="button" class="btn btn-outline-primary" onclick="ObtenerPolarRZ();"> Polar RZ</button>
      </div>
    </div>

    <div class="row mt-2" style="text-align: center;">
      <div class="col-sm-12">
          <button type="button" class="btn btn-outline-info" onclick="ObtenerManchester();"> Manchester</button>
          <button type="button" class="btn btn-outline-info" onclick="ObtenerManchesterDiferencial();"> Manchester Diferencial</button>
      </div>
    </div>

    <div class="row mt-2" style="text-align: center;">
      <div class="col-sm-12">
          <button type="button" class="btn btn-outline-danger" onclick="ObtenerAMI();"> AMI</button>
          <button type="button" class="btn btn-outline-danger" onclick="ObtenerPseudoTernaria();"> Pseudo Ternaria</button>
          <button type="button" class="btn btn-outline-danger" onclick="ObtenerB8ZS();"> B8ZS</button>
          <button type="button" class="btn btn-outline-danger" onclick="ObtenerHDB3();"> HDB3</button>
      </div>
    </div>
    <div class="row">
      <br>
    </div>      
    <div class="row">
      <div class="col-sm-12">
        <canvas id="Cartesiano" width="1000" height="400"></canvas>
      </div>
    </div>      

    <div class="row">
      <br>
      <br>
    </div>      

  </div>
<!--
  <label>ingresar cadena</label>
  <input id="idCadena" value="01001110">
  <select name="nVoltaje" id="idVoltaje">
    <option value="1">Positivo</option>
    <option value="-1">Negativo</option>
  </select>
  <button onclick="ObtenerUniPolarNRZ();"> Unipolar NRZ</button>
  <button onclick="ObtenerPolarNRZ_L();"> Polar NRZ-L</button>
  <button onclick="ObtenerPolarNRZ_I();"> Polar NRZ-I</button>
  <button onclick="ObtenerPolarRZ();"> Polar RZ</button>
  <button onclick="ObtenerManchester();"> Manchester</button>
  <button onclick="ObtenerManchesterDiferencial();"> Manchester Diferencial</button>
  <button onclick="ObtenerAMI();"> AMI</button>
  <button onclick="ObtenerPseudoTernaria();"> Pseudo Ternaria</button>
  <button onclick="ObtenerB8ZS();"> B8ZS</button>
  <button onclick="ObtenerHDB3();"> HDB3</button>

  <canvas id="Cartesiano" width="1000" height="400"></canvas>
-->

  <script id="">
    /* 
    Array de pontos cartesianos, cada item da array precisa ter
    coordenadas de X e Y, esses valores devem ser inseridos
    baseados no 1º Quadrante do Cartesiano (Igual usado em livros)
  */
    let pontosCartesianos = [];
    /*
      Aqui você seleciona quais pontosCartesianos serão conectadas,
      cada valor referencia diretamente o indice da coordenada 
      na Array pontosCartesianos.
    */

    //a-b     c-d
    let linesCartesianas = [];

    // Margem de espaçamento nas laterais para desenho do grafico
    let margin_spaces = 80;

    // Escala que determina o número de pontos que terá o plano cartesiano
    let escala = 12;

    // Sequencia de letras que será nomeadao os pontos
    let alfabeto = "abcdefghijklmnñopqrstuvwzxz";
    //a      b       c       d      e
    pontosCartesianos = [
      //[X, Y],
      [0, 0],
      [0, 2], //
      [1, 0],
      [1, 2],
      [2, 0],
      [2, 2],
      [3, 0],
      [3, 2], //
      [4, 0],
      [4, 2],
      [5, 0],
      [5, 2],
      [6, 0],
      [6, 2],
      [7, 0],
      [7, 2],
      [8, 0],
      [8, 2],
      [9, 0],
      [9, 2],
      [10, 0],
      [10, 2],
    ];

    linesCartesianas = [
      [0, 1]
    ];

    let canvas = document.getElementById('Cartesiano');
    let context = canvas.getContext('2d');

    let ancho = 300;
    let alto = 300;

    // cálcula a escala para ter um espaçamento em seu limite
    escala = Math.ceil(escala * 1.2);
    // cálcula o tamanho em pixels de cada unidade para cada coordenada da escala determinada.
    let step_size = [Math.floor((margin_spaces * 2 + ancho) / escala), Math.floor((margin_spaces * 2 + canvas
      .height) / escala)];

    // ponto em pixels do ponto zero do 1º Quadrante
    let ponto_zero = [margin_spaces, alto - margin_spaces];

    // Converte a coordenada do 1º Quadrante para 4º Quadrante (Pixels) 
    const converte_primeiro_para_quarto = coordenada => [ponto_zero[0] + coordenada[0] * step_size[0], ponto_zero[1] +
      coordenada[1] * step_size[1] * -1
    ];
    /*
    Função que desenha todos os componentes de um ponto no plano cartesiano
    */
    function drawnPoint(coordenada, index) {
      // Converte a coordenada do 1º Quadrante para 4º Quadrante (Pixels) 
      let coordenada_normalizada = converte_primeiro_para_quarto(coordenada);

      context.beginPath();
      context.moveTo(coordenada_normalizada[0], coordenada_normalizada[1]);
      // cria o ponto
      context.arc(coordenada_normalizada[0], coordenada_normalizada[1], 3, 0, Math.PI * 2, true);
      context.fill();

      // cria o texto
      context.font = 'italic 18px roboto';
      context.fillText(alfabeto[index], coordenada_normalizada[0] - margin_spaces * 1.4, coordenada_normalizada[1] -
        margin_spaces * 0.2);
      context.closePath();

      // cria linha pontilhada horizontal
      context.beginPath();
      context.setLineDash([5, 5]);
      context.moveTo(coordenada_normalizada[0], coordenada_normalizada[1]);
      context.lineTo(margin_spaces, coordenada_normalizada[1]);
      context.stroke();
      context.closePath();

      // cria linha pontilhada vertical
      context.beginPath();
      context.moveTo(coordenada_normalizada[0], coordenada_normalizada[1]);
      context.lineTo(coordenada_normalizada[0], alto - margin_spaces);
      context.stroke();
      context.closePath();

      // cria os textos nas absissas e nas ordenadas
      context.font = '14px serif';
      //context.strokeStyle = '#ff0000';
      context.fillText('', coordenada_normalizada[0] - margin_spaces * 0.3, alto - margin_spaces * 0.3);
      context.fillText('', margin_spaces * 0.3, coordenada_normalizada[1]);
    }

    // Cria as linhas no plano apartr das coordenas cartesianas
    function drawnLines(coordenadas, lines, color) {
      context.strokeStyle = color;
      let coordenada_convertidas = coordenadas;

      //percorre as regras das linhas
      lines.forEach(line => {
        /* 
          Para cada coordenada em que a linha referencia, 
          antes de deter a coordenada do quadrante, é somado um valor de direção
          primeira ponto da linha diminui e o segundo um maior
        */
        coordenada_convertidas = coordenada_convertidas.map(
          (coordenada, index) => {
            let direction = 0;
            return converte_primeiro_para_quarto([coordenada[0] + direction, coordenada[1] + direction]);
          });

        context.beginPath();
        context.lineWidth = 2;
        context.setLineDash([0, 0]);
        context.moveTo(coordenada_convertidas[line[0]][0], coordenada_convertidas[line[0]][1]);
        context.lineTo(coordenada_convertidas[line[1]][0], coordenada_convertidas[line[1]][1]);
        context.stroke();
        context.closePath();
      });
    }
    /*
    function angle(cx, cy, ex, ey) {
      var dy = ey - cy;
      var dx = ex - cx;
      var theta = Math.atan2(dy, dx); // range (-PI, PI]
      theta *= 180 / Math.PI; // rads to degs, range (-180, 180]
      //if (theta < 0) theta = 360 + theta; // range [0, 360)
      return theta;
    }
    */
    function drawPlanCartesiano() {
      console.log("entranding");

      // Flecha triângulo ^
      context.beginPath();
      context.moveTo(margin_spaces - 5, margin_spaces);
      context.lineTo(margin_spaces + 5, margin_spaces);
      context.lineTo(margin_spaces, margin_spaces - 5);
      context.fill();

      // cria a linha vertical
      context.moveTo(margin_spaces, margin_spaces);
      context.lineTo(margin_spaces, alto + 100 - margin_spaces / 2);

      // cria a linha horizontal  
      context.moveTo(margin_spaces / 2, alto - margin_spaces);
      context.lineTo(ancho * 3.5 - margin_spaces, alto - margin_spaces);
      context.stroke();

      // cria flecha triangular >
      context.moveTo(ancho * 3.5 - margin_spaces, alto - margin_spaces - 5);
      context.lineTo(ancho * 3.5 - margin_spaces, alto - margin_spaces + 5);
      context.lineTo(ancho * 3.5 - margin_spaces + 6, alto - margin_spaces);
      context.fill();
      context.closePath();

      /*
          //ponto circular no ponto zero
          context.moveTo(margin_spaces,alto-margin_spaces);
          context.beginPath();
          context.arc(margin_spaces,alto-margin_spaces, 2, 0, Math.PI * 2, true);
          context.fill();
          context.closePath();
      */

      // Percorre a configuração dos pontos cartesianos mandando para função drawnPoint
      /*
      pontosCartesianos.forEach((point, index) => {
        console.log(point, index);
        drawnPoint(point, index);
      });
      */

      drawnPoint([30, 2], 21);
      drawnPoint([30, -2], 21);
      // dropa as linhas
      //drawnLines(pontosCartesianos, linesCartesianas);
    }



    /* METODOS */
    /* METODOS */
    /* METODOS */
    /* METODOS */


    var ObtenerUniPolarNRZ = function () {
      LimpiarCanvas();
      pontosCartesianos = [];
      var divisiones = $("#idCadena").val().split("");

      divisiones.forEach((point, index) => {
        if (point == 1) {
          pontosCartesianos.push([index * 2, 2]);
          pontosCartesianos.push([index * 2 + 2, 2]);
        } else {
          pontosCartesianos.push([index * 2, 0]);
          pontosCartesianos.push([index * 2 + 2, 0]);
        }
      });
      color = '#007bff';
      console.log(pontosCartesianos);
      pontosCartesianos.forEach((point, index) => {
        linesCartesianas = [
          [index, index + 1]
        ];
        drawnLines(pontosCartesianos, linesCartesianas, color);
      });
    };

    var ObtenerPolarNRZ_L = function () {
      LimpiarCanvas();
      pontosCartesianos = [];
      var divisiones = $("#idCadena").val().split("");
      divisiones.forEach((point, index) => {
        if (point == 1) {
          pontosCartesianos.push([index * 2, -1]);
          pontosCartesianos.push([index * 2 + 2, -1]);
        } else {
          pontosCartesianos.push([index * 2, 1]);
          pontosCartesianos.push([index * 2 + 2, 1]);
        }
      });
      color = '#007bff';
      pontosCartesianos.forEach((point, index) => {
        linesCartesianas = [
          [index, index + 1]
        ];
        drawnLines(pontosCartesianos, linesCartesianas, color);
      });
    };

    var ObtenerPolarNRZ_I = function () {
      LimpiarCanvas();
      voltaje = $("#idVoltaje").val();
      pontosCartesianos = [];

      if (voltaje == 1) {
        pontosCartesianos.push([0, 1]);
      } else {
        pontosCartesianos.push([0, -1]);
      }

      var divisiones = $("#idCadena").val().split("");

      divisiones.forEach((point, index) => {

        if (voltaje == 1 && point == 1) {
          console.log("voltaje == 1 && point == 1");
          voltaje = -1;
          pontosCartesianos.push([index * 2, -1]);
          pontosCartesianos.push([index * 2 + 2, -1]);
        } else {
          if (voltaje == -1 && point == 1) {
            console.log("voltaje == -1 && point == 1");
            voltaje = 1;
            pontosCartesianos.push([index * 2, 1]);
            pontosCartesianos.push([index * 2 + 2, 1]);
          } else {
            console.log("cerooo");
            //pontosCartesianos.push([index * 2 , 1 * voltaje]);
            pontosCartesianos.push([index * 2 + 2, 1 * voltaje]);
          }
        }
      });
      color = '#007bff';
      console.log(pontosCartesianos);

      pontosCartesianos.forEach((point, index) => {
        linesCartesianas = [
          [index, index + 1]
        ];
        drawnLines(pontosCartesianos, linesCartesianas, color);
      });
    };

    var ObtenerPolarRZ = function () {
      LimpiarCanvas();
      pontosCartesianos = [];
      var divisiones = $("#idCadena").val().split("");

      divisiones.forEach((point, index) => {
        if (point == 1) {
          pontosCartesianos.push([index * 2, 1]);
          pontosCartesianos.push([index * 2 + 1, 1]);
          pontosCartesianos.push([index * 2 + 1, 0]);
          pontosCartesianos.push([index * 2 + 2, 0]);
        } else {
          pontosCartesianos.push([index * 2, -1]);
          pontosCartesianos.push([index * 2 + 1, -1]);
          pontosCartesianos.push([index * 2 + 1, 0]);
          pontosCartesianos.push([index * 2 + 2, 0]);
        }
      });
      color = '#007bff';
      console.log(pontosCartesianos);
      pontosCartesianos.forEach((point, index) => {
        linesCartesianas = [
          [index, index + 1]
        ];
        drawnLines(pontosCartesianos, linesCartesianas, color);
      });
    };

    var ObtenerManchester = function () {
      LimpiarCanvas();
      pontosCartesianos = [];
      var divisiones = $("#idCadena").val().split("");

      divisiones.forEach((point, index) => {
        if (point == 1) {
          pontosCartesianos.push([index * 2, -2]);
          pontosCartesianos.push([index * 2 + 1, -2]);
          pontosCartesianos.push([index * 2 + 1, 2]);
          pontosCartesianos.push([index * 2 + 2, 2]);
        } else {
          pontosCartesianos.push([index * 2, 2]);
          pontosCartesianos.push([index * 2 + 1, 2]);
          pontosCartesianos.push([index * 2 + 1, -2]);
          pontosCartesianos.push([index * 2 + 2, -2]);
        }
      });
      color = '#17a2b8';
      console.log(pontosCartesianos);
      pontosCartesianos.forEach((point, index) => {
        linesCartesianas = [
          [index, index + 1]
        ];
        drawnLines(pontosCartesianos, linesCartesianas, color);
      });
    };


    var ObtenerManchesterDiferencial = function () {
      LimpiarCanvas();
      pontosCartesianos = [];

      voltaje = $("#idVoltaje").val();
      if (voltaje == 1)
        pontosCartesianos.push([0, 2]);
      else
        pontosCartesianos.push([0, -2]);

      var divisiones = $("#idCadena").val().split("");

      divisiones.forEach((point, index) => {
        if (point == 1) {

          pontosCartesianos.push([index * 2, 2 * voltaje]);
          pontosCartesianos.push([index * 2 + 1, 2 * voltaje]);
          pontosCartesianos.push([index * 2 + 1, -2 * voltaje]);
          pontosCartesianos.push([index * 2 + 2, -2 * voltaje]);
          voltaje = voltaje * -1;
        } else {
          pontosCartesianos.push([index * 2, -2 * voltaje]);
          pontosCartesianos.push([index * 2 + 1, -2 * voltaje]);
          pontosCartesianos.push([index * 2 + 1, 2 * voltaje]);
          pontosCartesianos.push([index * 2 + 2, 2 * voltaje]);
        }
      });
      console.log(pontosCartesianos);
      color = '#17a2b8';
      pontosCartesianos.forEach((point, index) => {
        linesCartesianas = [
          [index, index + 1]
        ];
        drawnLines(pontosCartesianos, linesCartesianas, color);
      });
    };

    var ObtenerAMI = function (voltaje) {
      LimpiarCanvas();
      voltaje = $("#idVoltaje").val();
      voltaje = voltaje * (-1);

      pontosCartesianos = [];
      var divisiones = $("#idCadena").val().split("");

      divisiones.forEach((point, index) => {
        if (point == 1) {
          pontosCartesianos.push([index * 2, 2 * voltaje]);
          pontosCartesianos.push([index * 2 + 2, 2 * voltaje]);
          voltaje = voltaje * (-1);
        } else {
          pontosCartesianos.push([index * 2, 0]);
          pontosCartesianos.push([index * 2 + 2, 0]);
        }
      });
      color = '#ff0000';
      console.log(pontosCartesianos);
      pontosCartesianos.forEach((point, index) => {
        linesCartesianas = [
          [index, index + 1]
        ];
        drawnLines(pontosCartesianos, linesCartesianas, color);
      });
    };

    var ObtenerPseudoTernaria = function () {
      LimpiarCanvas();

      voltaje = $("#idVoltaje").val();

      pontosCartesianos = [];
      pontosCartesianos.push([0, 0]);

      var divisiones = $("#idCadena").val().split("");

      divisiones.forEach((point, index) => {
        if (point == 1) {
          pontosCartesianos.push([index * 2, 0]);
          pontosCartesianos.push([index * 2 + 2, 0]);
        } else {
          pontosCartesianos.push([index * 2, 2 * voltaje]);
          pontosCartesianos.push([index * 2 + 2, 2 * voltaje]);
          voltaje = voltaje * -1;
        }
      });
      color = '#ff0000';
      console.log(pontosCartesianos);
      pontosCartesianos.forEach((point, index) => {
        linesCartesianas = [
          [index, index + 1]
        ];
        drawnLines(pontosCartesianos, linesCartesianas, color);
      });
    };

    var LimpiarCanvas = function () {
      canvas.width = canvas.width;
      console.log("limpiando");
      //$("#Cartesiano").html("");
      drawPlanCartesiano();
    }

    //ObtenerPseudoTernaria
  </script>


</body>

</html>